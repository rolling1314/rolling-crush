# å¯è°ƒæ•´å¤§å°çš„ AI Assistant é¢æ¿åŠŸèƒ½

## âœ¨ æ–°å¢åŠŸèƒ½

### 1. å¯æ‹–åŠ¨è°ƒæ•´å®½åº¦
- AI Assistant é¢æ¿å³ä¾§è¾¹æ¡†ç°åœ¨å¯ä»¥æ‹–åŠ¨
- é¼ æ ‡æ‚¬åœæ—¶è¾¹æ¡†ä¼šé«˜äº®æ˜¾ç¤ºï¼ˆè“è‰²ï¼‰
- æ‹–åŠ¨æ—¶å…‰æ ‡ä¼šå˜ä¸ºè°ƒæ•´å¤§å°å›¾æ ‡

### 2. å®½åº¦é™åˆ¶
- **æœ€å°å®½åº¦**: 280px
- **æœ€å¤§å®½åº¦**: 800px
- **é»˜è®¤å®½åº¦**: 400px

### 3. æ»šåŠ¨æ¡
- AI Assistant é¢æ¿å†…çš„æ¶ˆæ¯åˆ—è¡¨å·²ç»æœ‰æ»šåŠ¨åŠŸèƒ½
- è‡ªåŠ¨æ»šåŠ¨åˆ°æœ€æ–°æ¶ˆæ¯

## ğŸ¯ ä½¿ç”¨æ–¹æ³•

### è°ƒæ•´é¢æ¿å®½åº¦

1. **æ‰¾åˆ°è°ƒæ•´æ‰‹æŸ„**
   - ä½äº AI Assistant é¢æ¿çš„å³ä¾§è¾¹æ¡†
   - å®½åº¦ä¸º 1px çš„å‚ç›´çº¿

2. **é¼ æ ‡æ‚¬åœ**
   - å°†é¼ æ ‡ç§»åˆ°å³ä¾§è¾¹æ¡†ä¸Š
   - è¾¹æ¡†ä¼šä»ç°è‰²å˜ä¸ºè“è‰²
   - å…‰æ ‡ä¼šå˜ä¸º `â†”` è°ƒæ•´å¤§å°å›¾æ ‡

3. **æ‹–åŠ¨è°ƒæ•´**
   - æŒ‰ä½é¼ æ ‡å·¦é”®
   - å‘å·¦æ‹–åŠ¨ = ç¼©å°é¢æ¿
   - å‘å³æ‹–åŠ¨ = æ‰©å¤§é¢æ¿
   - é‡Šæ”¾é¼ æ ‡å®Œæˆè°ƒæ•´

### æ»šåŠ¨æ¶ˆæ¯

- **è‡ªåŠ¨æ»šåŠ¨**: æ–°æ¶ˆæ¯åˆ°è¾¾æ—¶è‡ªåŠ¨æ»šåŠ¨åˆ°åº•éƒ¨
- **æ‰‹åŠ¨æ»šåŠ¨**: ä½¿ç”¨é¼ æ ‡æ»šè½®æˆ–è§¦æ§æ¿æ»šåŠ¨æŸ¥çœ‹å†å²æ¶ˆæ¯

## ğŸ”§ æŠ€æœ¯å®ç°

### çŠ¶æ€ç®¡ç†

```typescript
const [chatWidth, setChatWidth] = useState(400); // é¢æ¿å®½åº¦
const [isResizing, setIsResizing] = useState(false); // æ˜¯å¦æ­£åœ¨è°ƒæ•´å¤§å°
```

### æ‹–åŠ¨é€»è¾‘

```typescript
// 1. é¼ æ ‡æŒ‰ä¸‹ - å¼€å§‹è°ƒæ•´
const handleMouseDown = (e: React.MouseEvent) => {
  e.preventDefault();
  setIsResizing(true);
};

// 2. é¼ æ ‡ç§»åŠ¨ - æ›´æ–°å®½åº¦
useEffect(() => {
  const handleMouseMove = (e: MouseEvent) => {
    if (!isResizing) return;
    
    const newWidth = e.clientX;
    // é™åˆ¶åœ¨ 280px - 800px ä¹‹é—´
    if (newWidth >= 280 && newWidth <= 800) {
      setChatWidth(newWidth);
    }
  };

  const handleMouseUp = () => {
    setIsResizing(false);
  };

  if (isResizing) {
    document.addEventListener('mousemove', handleMouseMove);
    document.addEventListener('mouseup', handleMouseUp);
    // è®¾ç½®å…¨å±€å…‰æ ‡æ ·å¼
    document.body.style.cursor = 'col-resize';
    document.body.style.userSelect = 'none';
  }

  return () => {
    document.removeEventListener('mousemove', handleMouseMove);
    document.removeEventListener('mouseup', handleMouseUp);
    document.body.style.cursor = '';
    document.body.style.userSelect = '';
  };
}, [isResizing]);
```

### UI ç»“æ„

```tsx
<div className="flex h-screen">
  {/* å¯è°ƒæ•´å¤§å°çš„ Chat é¢æ¿ */}
  <div style={{ width: `${chatWidth}px` }} className="shrink-0 h-full flex">
    <div className="flex-1 h-full overflow-hidden">
      <ChatPanel {...props} />
    </div>
    
    {/* è°ƒæ•´æ‰‹æŸ„ */}
    <div
      className="w-1 h-full bg-gray-700 hover:bg-blue-500 cursor-col-resize transition-colors"
      onMouseDown={handleMouseDown}
    >
      <div className="absolute inset-y-0 -left-1 -right-1" />
    </div>
  </div>

  {/* å³ä¾§å†…å®¹åŒºåŸŸ */}
  <div className="flex-1 flex h-full">
    {/* File Tree + Code Editor */}
  </div>
</div>
```

## ğŸ¨ æ ·å¼ç»†èŠ‚

### è°ƒæ•´æ‰‹æŸ„æ ·å¼

```css
/* åŸºç¡€æ ·å¼ */
w-1              /* å®½åº¦ 4px */
h-full           /* é«˜åº¦ 100% */
bg-gray-700      /* é»˜è®¤ç°è‰²èƒŒæ™¯ */

/* æ‚¬åœæ•ˆæœ */
hover:bg-blue-500    /* æ‚¬åœæ—¶è“è‰² */
cursor-col-resize    /* è°ƒæ•´å¤§å°å…‰æ ‡ */
transition-colors    /* é¢œè‰²è¿‡æ¸¡åŠ¨ç”» */

/* æ‰©å¤§ç‚¹å‡»åŒºåŸŸ */
<div className="absolute inset-y-0 -left-1 -right-1" />
/* å®é™…ç‚¹å‡»åŒºåŸŸæ¯”è§†è§‰å®½åº¦å¤§ï¼Œæ›´å®¹æ˜“ç‚¹å‡» */
```

### ChatPanel æ ·å¼

```css
/* ç§»é™¤å³è¾¹æ¡†ï¼ˆå› ä¸ºè°ƒæ•´æ‰‹æŸ„å·²ç»æä¾›äº†è§†è§‰åˆ†éš”ï¼‰ */
<div className="flex flex-col h-full bg-[#1e1e1e]">
  {/* ä¸å†éœ€è¦ border-r border-gray-700 */}
</div>
```

## ğŸ“Š å¸ƒå±€è¯´æ˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     æµè§ˆå™¨çª—å£                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                  â”‚â–“â”‚                                     â”‚
â”‚   AI Assistant   â”‚â–“â”‚  File Tree  â”‚  Code Editor         â”‚
â”‚                  â”‚â–“â”‚             â”‚                       â”‚
â”‚   (å¯è°ƒæ•´å®½åº¦)    â”‚â–“â”‚             â”‚                       â”‚
â”‚                  â”‚â–“â”‚             â”‚                       â”‚
â”‚   280-800px      â”‚â–“â”‚  250px      â”‚  flex-1              â”‚
â”‚   é»˜è®¤ 400px     â”‚â–“â”‚             â”‚                       â”‚
â”‚                  â”‚â–“â”‚             â”‚                       â”‚
â”‚   [æ»šåŠ¨æ¡]       â”‚â–“â”‚             â”‚                       â”‚
â”‚                  â”‚â–“â”‚             â”‚                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†‘
                 è°ƒæ•´æ‰‹æŸ„
              (å¯æ‹–åŠ¨è°ƒæ•´å®½åº¦)
```

## ğŸš€ æµ‹è¯•æ­¥éª¤

### 1. å¯åŠ¨åº”ç”¨

```bash
# å¯åŠ¨å‰ç«¯
cd /Users/apple/crush/crush-fe
pnpm run dev
```

### 2. æµ‹è¯•è°ƒæ•´å®½åº¦

1. æ‰“å¼€æµè§ˆå™¨è®¿é—® http://localhost:5173
2. æ‰¾åˆ° AI Assistant é¢æ¿å³ä¾§çš„è¾¹æ¡†
3. é¼ æ ‡æ‚¬åœ - åº”è¯¥çœ‹åˆ°è¾¹æ¡†å˜è“è‰²
4. æŒ‰ä½é¼ æ ‡å·¦é”®æ‹–åŠ¨
5. å‘å·¦æ‹–åŠ¨ - é¢æ¿å˜çª„
6. å‘å³æ‹–åŠ¨ - é¢æ¿å˜å®½
7. å°è¯•æ‹–åŠ¨åˆ°æé™ - åº”è¯¥åœåœ¨ 280px æˆ– 800px

### 3. æµ‹è¯•æ»šåŠ¨

1. åœ¨èŠå¤©æ¡†è¾“å…¥å¤šæ¡æ¶ˆæ¯
2. è§‚å¯Ÿæ¶ˆæ¯åˆ—è¡¨è‡ªåŠ¨æ»šåŠ¨åˆ°åº•éƒ¨
3. æ‰‹åŠ¨å‘ä¸Šæ»šåŠ¨æŸ¥çœ‹å†å²æ¶ˆæ¯
4. å‘é€æ–°æ¶ˆæ¯ - åº”è¯¥è‡ªåŠ¨æ»šåŠ¨åˆ°åº•éƒ¨

### 4. æµ‹è¯•è¾¹ç•Œæƒ…å†µ

**æœ€å°å®½åº¦æµ‹è¯•**:
- å‘å·¦æ‹–åŠ¨åˆ°æé™
- é¢æ¿åº”è¯¥åœåœ¨ 280px
- å†…å®¹åº”è¯¥ä»ç„¶å¯è¯»

**æœ€å¤§å®½åº¦æµ‹è¯•**:
- å‘å³æ‹–åŠ¨åˆ°æé™
- é¢æ¿åº”è¯¥åœåœ¨ 800px
- ä¸åº”è¯¥å æ®æ•´ä¸ªå±å¹•

**æ‹–åŠ¨ä½“éªŒæµ‹è¯•**:
- æ‹–åŠ¨åº”è¯¥æµç•…ï¼Œæ— å¡é¡¿
- é‡Šæ”¾é¼ æ ‡åç«‹å³åœæ­¢è°ƒæ•´
- å…‰æ ‡åº”è¯¥æ¢å¤æ­£å¸¸

## ğŸ’¡ ç”¨æˆ·ä½“éªŒä¼˜åŒ–

### 1. è§†è§‰åé¦ˆ
- âœ… æ‚¬åœæ—¶è¾¹æ¡†é«˜äº®ï¼ˆè“è‰²ï¼‰
- âœ… æ‹–åŠ¨æ—¶å…‰æ ‡å˜ä¸ºè°ƒæ•´å¤§å°å›¾æ ‡
- âœ… é¢œè‰²è¿‡æ¸¡åŠ¨ç”»ï¼ˆtransition-colorsï¼‰

### 2. äº¤äº’ä¼˜åŒ–
- âœ… æ‰©å¤§ç‚¹å‡»åŒºåŸŸï¼ˆå®é™…ç‚¹å‡»åŒºåŸŸæ¯”è§†è§‰å®½åº¦å¤§ï¼‰
- âœ… æ‹–åŠ¨æ—¶ç¦æ­¢æ–‡æœ¬é€‰æ‹©ï¼ˆuserSelect: 'none'ï¼‰
- âœ… æ‹–åŠ¨æ—¶å…¨å±€å…‰æ ‡æ ·å¼ï¼ˆcol-resizeï¼‰

### 3. æ€§èƒ½ä¼˜åŒ–
- âœ… ä½¿ç”¨ useEffect ç®¡ç†äº‹ä»¶ç›‘å¬å™¨
- âœ… æ­£ç¡®æ¸…ç†äº‹ä»¶ç›‘å¬å™¨
- âœ… æ¡ä»¶æ¸²æŸ“å‡å°‘ä¸å¿…è¦çš„æ›´æ–°

## ğŸ› å·²çŸ¥é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

### é—®é¢˜ 1: æ‹–åŠ¨ä¸æµç•…

**åŸå› **: æµè§ˆå™¨æ¸²æŸ“æ€§èƒ½é—®é¢˜

**è§£å†³æ–¹æ¡ˆ**:
- ä½¿ç”¨ `requestAnimationFrame` ä¼˜åŒ–æ¸²æŸ“
- å‡å°‘çŠ¶æ€æ›´æ–°é¢‘ç‡ï¼ˆèŠ‚æµï¼‰

### é—®é¢˜ 2: æ‹–åŠ¨æ—¶é€‰ä¸­æ–‡æœ¬

**åŸå› **: æœªç¦æ­¢æ–‡æœ¬é€‰æ‹©

**è§£å†³æ–¹æ¡ˆ**: âœ… å·²ä¿®å¤
```typescript
document.body.style.userSelect = 'none';
```

### é—®é¢˜ 3: é‡Šæ”¾é¼ æ ‡åä»åœ¨è°ƒæ•´

**åŸå› **: äº‹ä»¶ç›‘å¬å™¨æœªæ­£ç¡®æ¸…ç†

**è§£å†³æ–¹æ¡ˆ**: âœ… å·²ä¿®å¤
```typescript
return () => {
  document.removeEventListener('mousemove', handleMouseMove);
  document.removeEventListener('mouseup', handleMouseUp);
};
```

## ğŸ“ ä»£ç ä¿®æ”¹æ€»ç»“

### ä¿®æ”¹çš„æ–‡ä»¶

1. **`crush-fe/src/App.tsx`**
   - æ·»åŠ  `chatWidth` å’Œ `isResizing` çŠ¶æ€
   - æ·»åŠ  `handleMouseDown` å¤„ç†å‡½æ•°
   - æ·»åŠ  `useEffect` å¤„ç†æ‹–åŠ¨é€»è¾‘
   - ä¿®æ”¹å¸ƒå±€ç»“æ„ï¼Œæ·»åŠ è°ƒæ•´æ‰‹æŸ„

2. **`crush-fe/src/components/ChatPanel.tsx`**
   - ç§»é™¤å³è¾¹æ¡†æ ·å¼ï¼ˆ`border-r border-gray-700`ï¼‰
   - ä¿æŒæ»šåŠ¨åŠŸèƒ½ä¸å˜

## ğŸ¯ ä¸‹ä¸€æ­¥ä¼˜åŒ–å»ºè®®

### 1. æŒä¹…åŒ–å®½åº¦è®¾ç½®
```typescript
// ä¿å­˜åˆ° localStorage
useEffect(() => {
  localStorage.setItem('chatWidth', chatWidth.toString());
}, [chatWidth]);

// ä» localStorage è¯»å–
const [chatWidth, setChatWidth] = useState(() => {
  const saved = localStorage.getItem('chatWidth');
  return saved ? parseInt(saved) : 400;
});
```

### 2. åŒå‡»é‡ç½®å®½åº¦
```typescript
const handleDoubleClick = () => {
  setChatWidth(400); // é‡ç½®ä¸ºé»˜è®¤å®½åº¦
};
```

### 3. æ·»åŠ å®½åº¦é¢„è®¾
```typescript
// å¿«æ·æŒ‰é’®ï¼šå°ã€ä¸­ã€å¤§
<button onClick={() => setChatWidth(300)}>å°</button>
<button onClick={() => setChatWidth(400)}>ä¸­</button>
<button onClick={() => setChatWidth(600)}>å¤§</button>
```

### 4. å“åº”å¼è®¾è®¡
```typescript
// åœ¨å°å±å¹•ä¸Šè‡ªåŠ¨è°ƒæ•´æœ€å¤§å®½åº¦
const maxWidth = window.innerWidth < 1200 ? 500 : 800;
```

## âœ… åŠŸèƒ½éªŒæ”¶æ¸…å•

- [x] å¯ä»¥æ‹–åŠ¨ AI Assistant é¢æ¿å³ä¾§è¾¹æ¡†
- [x] æ‹–åŠ¨æ—¶è¾¹æ¡†é«˜äº®æ˜¾ç¤º
- [x] æ‹–åŠ¨æ—¶å…‰æ ‡å˜ä¸ºè°ƒæ•´å¤§å°å›¾æ ‡
- [x] å®½åº¦é™åˆ¶åœ¨ 280px - 800px ä¹‹é—´
- [x] æ‹–åŠ¨æµç•…ï¼Œæ— å¡é¡¿
- [x] é‡Šæ”¾é¼ æ ‡åç«‹å³åœæ­¢è°ƒæ•´
- [x] AI Assistant é¢æ¿å†…æœ‰æ»šåŠ¨æ¡
- [x] æ–°æ¶ˆæ¯è‡ªåŠ¨æ»šåŠ¨åˆ°åº•éƒ¨
- [x] å¯ä»¥æ‰‹åŠ¨æ»šåŠ¨æŸ¥çœ‹å†å²æ¶ˆæ¯
- [x] å¸ƒå±€åœ¨è°ƒæ•´åä»ç„¶æ­£å¸¸æ˜¾ç¤º

## ğŸ‰ æ€»ç»“

æˆåŠŸå®ç°äº† AI Assistant é¢æ¿çš„å¯è°ƒæ•´å¤§å°åŠŸèƒ½ï¼š
- âœ… æ‹–åŠ¨è°ƒæ•´å®½åº¦ï¼ˆ280px - 800pxï¼‰
- âœ… è§†è§‰åé¦ˆå’Œäº¤äº’ä¼˜åŒ–
- âœ… æ»šåŠ¨åŠŸèƒ½æ­£å¸¸å·¥ä½œ
- âœ… ä»£ç ç»“æ„æ¸…æ™°ï¼Œæ˜“äºç»´æŠ¤

ç”¨æˆ·ç°åœ¨å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚è‡ªç”±è°ƒæ•´ AI Assistant é¢æ¿çš„å®½åº¦ï¼Œè·å¾—æ›´å¥½çš„ä½¿ç”¨ä½“éªŒï¼

