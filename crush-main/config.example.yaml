# Crush 应用配置文件示例
# 复制此文件为 config.yaml 并根据实际情况修改配置
# 通过环境变量 APP_ENV 来指定使用哪个环境（development 或 production）
# 例如: export APP_ENV=production

# 开发环境配置
development:
  # 服务器配置
  server:
    http_port: "8001"    # HTTP API 服务端口
    ws_port: "8002"      # WebSocket 服务端口
    debug: true          # 调试模式

  # 认证配置
  auth:
    jwt_secret: "crush-dev-jwt-secret-change-in-production-2024"  # JWT 密钥
    token_expire_hour: 24  # Token 过期时间（小时）

  # 数据库配置
  database:
    host: "localhost"
    port: 5432
    user: "crush"
    password: "123456"
    database: "crush"
    sslmode: "disable"
    max_open_conns: 25
    max_idle_conns: 5

  # Redis 配置
  redis:
    host: "localhost"
    port: 6379
    password: "123456"
    db: 0
    pool_size: 10
    stream_max_len: 1000
    stream_ttl: 3600
  
  # 沙箱服务配置
  sandbox:
    base_url: "http://localhost:8888"
    timeout: 300  # 超时时间（秒）
    external_ip: "localhost"  # 项目容器的外部访问 IP（用于 iframe 预览）
  
  # 对象存储配置（MinIO/OSS）
  storage:
    type: "minio"  # minio 或 oss
    # MinIO 配置
    minio:
      endpoint: "localhost:9000"
      access_key: "minioadmin"
      secret_key: "minioadmin123"
      bucket: "crush-images"
      use_ssl: false
      public_endpoint: ""  # 可选：公开访问的端点
    # 阿里云 OSS 配置（如果 type 为 oss）
    oss:
      endpoint: "oss-cn-hangzhou.aliyuncs.com"
      access_key_id: "your-access-key-id"
      access_key_secret: "your-access-key-secret"
      bucket: "crush-images"
      use_ssl: true

  # Auto 模型配置（用户选择 "Auto" 时使用的默认模型）
  auto_model:
    provider: "zhipu"                                    # 提供商 ID
    model: "glm-4-plus"                                  # 模型 ID
    api_key: "your-zhipu-api-key"                        # API Key
    base_url: "https://open.bigmodel.cn/api/paas/v4"     # API 端点

# 生产环境配置（与开发环境保持一致）
production:
  # 服务器配置
  server:
    http_port: "8001"
    ws_port: "8002"
    debug: true          # 与开发环境一致

  # 认证配置
  auth:
    jwt_secret: "crush-dev-jwt-secret-change-in-production-2024"  # 与开发环境一致
    token_expire_hour: 24

  # 数据库配置
  database:
    host: "localhost"
    port: 5432
    user: "crush"
    password: "123456"
    database: "crush"
    sslmode: "disable"
    max_open_conns: 25
    max_idle_conns: 5

  # Redis 配置
  redis:
    host: "localhost"
    port: 6379
    password: "123456"
    db: 0
    pool_size: 10
    stream_max_len: 1000
    stream_ttl: 3600
  
  # 沙箱服务配置
  sandbox:
    base_url: "http://localhost:8888"
    timeout: 300
    external_ip: "your-production-ip"  # 项目容器的外部访问 IP（用于 iframe 预览）
  
  # 对象存储配置
  storage:
    type: "minio"
    minio:
      endpoint: "localhost:9000"
      access_key: "minioadmin"
      secret_key: "minioadmin123"
      bucket: "crush-images"
      use_ssl: false
      public_endpoint: ""
    oss:
      endpoint: "oss-cn-hangzhou.aliyuncs.com"
      access_key_id: "your-access-key-id"
      access_key_secret: "your-access-key-secret"
      bucket: "crush-images"
      use_ssl: true

  # Auto 模型配置（用户选择 "Auto" 时使用的默认模型）
  auto_model:
    provider: "zhipu"                                    # 提供商 ID
    model: "glm-4-plus"                                  # 模型 ID
    api_key: "your-zhipu-api-key"                        # API Key
    base_url: "https://open.bigmodel.cn/api/paas/v4"     # API 端点